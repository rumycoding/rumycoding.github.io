<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.0/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.16.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.0/dist/index.js"></script><script>(e=>{window.WebFontConfig={custom:{families:["KaTeX_AMS","KaTeX_Caligraphic:n4,n7","KaTeX_Fraktur:n4,n7","KaTeX_Main:n4,n7,i4,i7","KaTeX_Math:i4,i7","KaTeX_Script","KaTeX_SansSerif:n4,n7,i4","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4","KaTeX_Typewriter"]},active:()=>{e().refreshHook.call()}}})(()=>window.markmap)</script><script src="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js" defer></script><script>(()=>{setTimeout(()=>{const{markmap:H,mm:ae}=window,W=new H.Toolbar;W.attach(ae);const we=W.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((o,T,c,r)=>{const g=o();window.mm=g.Markmap.create("svg#mindmap",(T||g.deriveOptions)(r),c)})(()=>window.markmap,null,{"content":"计算机图形学","children":[{"content":"变换","children":[{"content":"齐次坐标系","children":[{"content":"仿射变换 = 线性 + 平移","children":[],"payload":{"lines":"4,5"}},{"content":"定义","children":[{"content":"点：(x,y,z,w) = (x/w,y/w,z/w,1)","children":[],"payload":{"lines":"6,7"}},{"content":"向量：(x,y,z,0)","children":[],"payload":{"lines":"7,8"}}],"payload":{"lines":"5,8","fold":1}}],"payload":{"lines":"3,4"}},{"content":"3d变换","children":[{"content":"3d 旋转","children":[{"content":"旋转矩阵的逆矩阵是置换矩阵","children":[],"payload":{"lines":"10,11"}},{"content":"欧拉角","children":[{"content":"问题：万向锁","children":[],"payload":{"lines":"12,13"}},{"content":"Rodrigues' Rotation Formula： 把任意旋转表示成矩阵形式","children":[],"payload":{"lines":"13,14"}}],"payload":{"lines":"11,14"}},{"content":"（拓展）四元数","children":[],"payload":{"lines":"14,15"}}],"payload":{"lines":"9,10"}}],"payload":{"lines":"8,9"}},{"content":"MVP (Model View Projection)","children":[{"content":"Model变换","children":[{"content":"=模特站位","children":[],"payload":{"lines":"17,18"}}],"payload":{"lines":"16,17"}},{"content":"View变换","children":[{"content":"=相机站位，把物体转换到相机的坐标系","children":[],"payload":{"lines":"19,20"}}],"payload":{"lines":"18,19"}},{"content":"Projection变换","children":[{"content":"=拍照","children":[],"payload":{"lines":"21,22"}},{"content":"两种投影方式","children":[{"content":"正交投影","children":[],"payload":{"lines":"23,24"}},{"content":"透视投影","children":[],"payload":{"lines":"24,25"}}],"payload":{"lines":"22,25"}},{"content":"定义视锥","children":[{"content":"可以根据这些算出 Projection变换矩阵中的l,r,b,t","children":[],"payload":{"lines":"26,27"}},{"content":"需要定义的量","children":[{"content":"长宽比=aspect ratio","children":[],"payload":{"lines":"28,29"}},{"content":"垂直可视角度 = vertical field of view","children":[],"payload":{"lines":"29,30"}},{"content":"近平面距离 = n","children":[],"payload":{"lines":"30,31"}},{"content":"远平面距离 = f","children":[],"payload":{"lines":"31,32"}}],"payload":{"lines":"27,32"}}],"payload":{"lines":"25,32","fold":1}}],"payload":{"lines":"20,21"}},{"content":"MVP之后：映射到屏幕空间","children":[],"payload":{"lines":"32,33"}}],"payload":{"lines":"15,16"}}],"payload":{"lines":"2,3"}},{"content":"光栅化","children":[{"content":"如何光栅化三角形","children":[{"content":"方法：采样","children":[],"payload":{"lines":"36,37"}},{"content":"问题","children":[{"content":"走样","children":[{"content":"走样成因：信号变化得太快，采样的频率跟不上","children":[],"payload":{"lines":"39,40"}},{"content":"例子：摩尔纹","children":[],"payload":{"lines":"40,41"}},{"content":"方法：滤波（去掉高频信号）","children":[{"content":"MSAA","children":[{"content":"supersampling -&gt; 先用4x4 sample （先提高像素），再算平均（减少像素）","children":[],"payload":{"lines":"43,44"}}],"payload":{"lines":"42,44","fold":1}},{"content":"（拓展）FXAA（Fast approximate AA），TAA（Temporal AA）","children":[],"payload":{"lines":"44,45"}}],"payload":{"lines":"41,45"}}],"payload":{"lines":"38,45"}},{"content":"遮挡","children":[{"content":"方法：深度缓存","children":[],"payload":{"lines":"46,47"}},{"content":"细节","children":[{"content":"考虑 super sample -&gt; 得每个采样点都有z-buffer","children":[],"payload":{"lines":"48,49"}},{"content":"深度插值","children":[{"content":"只知道三角形顶点的深度，不知道某个像素点位置的深度，需要插值","children":[],"payload":{"lines":"50,51"}}],"payload":{"lines":"49,51"}}],"payload":{"lines":"47,51","fold":1}}],"payload":{"lines":"45,51"}}],"payload":{"lines":"37,51"}}],"payload":{"lines":"35,36"}},{"content":"Shading 着色","children":[{"content":"定义：对物体应用不同材质","children":[],"payload":{"lines":"53,54"}},{"content":"Blinn-Phong Reflectance Model","children":[{"content":"高光项 (Specular term)","children":[{"content":"取决于半程向量和法线夹角","children":[],"payload":{"lines":"56,57"}}],"payload":{"lines":"55,57","fold":1}},{"content":"漫反射项（Lambertian term）","children":[{"content":"取决于光源和法线夹角","children":[],"payload":{"lines":"58,59"}}],"payload":{"lines":"57,59","fold":1}},{"content":"环境光照项 (Ambient term)","children":[{"content":"常数","children":[],"payload":{"lines":"60,61"}}],"payload":{"lines":"59,61","fold":1}}],"payload":{"lines":"54,55"}},{"content":"着色频率","children":[{"content":"逐平面 (flat shading)","children":[],"payload":{"lines":"62,63"}},{"content":"逐顶点 (gouraud shading)","children":[],"payload":{"lines":"63,64"}},{"content":"逐像素 (phong shading)","children":[{"content":"应用法线重心插值","children":[],"payload":{"lines":"65,66"}}],"payload":{"lines":"64,66","fold":1}}],"payload":{"lines":"61,62"}},{"content":"纹理映射","children":[{"content":"算法","children":[{"content":"三角形每个顶点都对应一个(u,v)，可以找到texcolor","children":[],"payload":{"lines":"68,69"}},{"content":"求逐像素的texcolor可以应用重心插值","children":[],"payload":{"lines":"69,70"}}],"payload":{"lines":"67,70","fold":1}},{"content":"问题","children":[{"content":"纹理太小了","children":[{"content":"方法：纹理放大","children":[],"payload":{"lines":"72,73"}},{"content":"最邻近插值，双线性插值，Bicubic插值","children":[],"payload":{"lines":"73,74"}}],"payload":{"lines":"71,74"}},{"content":"纹理太大了，产生走样","children":[{"content":"方法","children":[{"content":"超采样","children":[{"content":"问题：计算量很大","children":[],"payload":{"lines":"77,78"}}],"payload":{"lines":"76,78"}},{"content":"Mipmap","children":[{"content":"定义：快速近似正方形范围查询 =  image pyramid","children":[{"content":"需要查询像素覆盖范围内纹理的平均值","children":[],"payload":{"lines":"80,81"}}],"payload":{"lines":"79,81"}},{"content":"原理：存储范围查询的计算结果，简化计算（空间换时间）","children":[{"content":"多了1/3的存储空间","children":[],"payload":{"lines":"82,83"}}],"payload":{"lines":"81,83"}},{"content":"细节","children":[{"content":"计算需要查询第几层mipmap","children":[],"payload":{"lines":"84,85"}},{"content":"Trilinear插值","children":[{"content":"解决查询不连续问题","children":[],"payload":{"lines":"86,87"}},{"content":"1.8层 = 0.8 * 2层 + 0.2 * 1 层","children":[],"payload":{"lines":"87,88"}}],"payload":{"lines":"85,88"}}],"payload":{"lines":"83,88"}}],"payload":{"lines":"78,88","fold":1}},{"content":"各向异性过滤","children":[{"content":"可以查询长方形","children":[],"payload":{"lines":"89,90"}}],"payload":{"lines":"88,90"}}],"payload":{"lines":"75,90"}}],"payload":{"lines":"74,90"}}],"payload":{"lines":"70,90"}},{"content":"应用","children":[{"content":"Environment map","children":[{"content":"把环境光记录在物体上","children":[],"payload":{"lines":"92,93"}},{"content":"Cubemap","children":[],"payload":{"lines":"93,94"}}],"payload":{"lines":"91,94","fold":1}},{"content":"凹凸贴图 Bump/normal mapping","children":[{"content":"可以定义任意一个点相对表面的高度，重新计算法线","children":[],"payload":{"lines":"95,96"}}],"payload":{"lines":"94,96","fold":1}},{"content":"位移贴图","children":[{"content":"真的改变三角形的位置，但要求原来的模型就很细腻（不能在一个三角形上生成不同的位移）","children":[],"payload":{"lines":"97,98"}}],"payload":{"lines":"96,98","fold":1}},{"content":"高级纹理","children":[{"content":"3d纹理","children":[{"content":"定义空间任意一个点的颜色","children":[],"payload":{"lines":"100,101"}},{"content":"可以做体积渲染 （Volume rendering）","children":[],"payload":{"lines":"101,102"}}],"payload":{"lines":"99,102","fold":1}},{"content":"函数纹理 （Procedural Noise）","children":[{"content":"定义一个噪声函数当纹理","children":[],"payload":{"lines":"103,104"}}],"payload":{"lines":"102,104","fold":1}},{"content":"Precomputed Shading","children":[{"content":"提前把纹理算好，之后直接用","children":[],"payload":{"lines":"105,106"}}],"payload":{"lines":"104,106","fold":1}}],"payload":{"lines":"98,106"}}],"payload":{"lines":"90,106"}}],"payload":{"lines":"66,67"}}],"payload":{"lines":"51,52"}},{"content":"图形渲染管线","children":[{"content":"步骤","children":[{"content":"逐顶点处理","children":[],"payload":{"lines":"108,109"}},{"content":"逐三角形处理","children":[],"payload":{"lines":"109,110"}},{"content":"光栅化","children":[],"payload":{"lines":"110,111"}},{"content":"逐像素处理（Fragment processing）","children":[],"payload":{"lines":"111,112"}},{"content":"逐像素操作 (Framebuffer operations)","children":[{"content":"包含z-buffer","children":[],"payload":{"lines":"113,114"}}],"payload":{"lines":"112,114"}}],"payload":{"lines":"107,114","fold":1}}],"payload":{"lines":"106,107"}},{"content":"光栅化的问题","children":[{"content":"阴影","children":[{"content":"问题","children":[{"content":"光栅化只考虑了局部。涉及到全局光线的问题，光栅化都不太好处理，比如阴影","children":[],"payload":{"lines":"117,118"}}],"payload":{"lines":"116,118","fold":1}},{"content":"方法：shadow mapping","children":[{"content":"主要想法","children":[{"content":"如果一个点不在阴影里，那么摄像机和光源都能看到这个点","children":[],"payload":{"lines":"120,121"}}],"payload":{"lines":"119,121"}},{"content":"算法","children":[{"content":"Pass 1：建立shadow map，从光源渲染一张图，记录深度","children":[],"payload":{"lines":"122,123"}},{"content":"Pass 2：从眼睛渲染一张图，变换回光源视图，判断光源可否看到","children":[],"payload":{"lines":"123,124"}}],"payload":{"lines":"121,124"}},{"content":"问题","children":[{"content":"走样","children":[{"content":"shadowmap的分辨率","children":[],"payload":{"lines":"126,127"}}],"payload":{"lines":"125,127"}},{"content":"需要渲染两遍，开销大","children":[],"payload":{"lines":"127,128"}},{"content":"只能做硬阴影","children":[],"payload":{"lines":"128,129"}},{"content":"经典的shadow mapping只能处理点光源","children":[],"payload":{"lines":"129,130"}}],"payload":{"lines":"124,130"}}],"payload":{"lines":"118,130","fold":1}}],"payload":{"lines":"115,116"}}],"payload":{"lines":"114,115"}},{"content":"数学方法：插值","children":[{"content":"重心插值","children":[{"content":"透视矫正插值","children":[{"content":"透视变换后，重心坐标会改变，需要透视矫正","children":[],"payload":{"lines":"133,134"}}],"payload":{"lines":"132,134","fold":1}}],"payload":{"lines":"131,134"}},{"content":"双线性插值","children":[],"payload":{"lines":"134,136"}}],"payload":{"lines":"130,131"}}],"payload":{"lines":"34,35"}},{"content":"几何","children":[{"content":"隐式几何","children":[{"content":"定义","children":[{"content":"满足特定关系","children":[{"content":"f(x,y,z) = 0","children":[],"payload":{"lines":"140,141"}},{"content":"比如函数式可以写出一个球表面","children":[],"payload":{"lines":"141,142"}}],"payload":{"lines":"139,142","fold":1}}],"payload":{"lines":"138,142"}},{"content":"例子","children":[{"content":"constructive solid geometry","children":[],"payload":{"lines":"143,144"}},{"content":"距离函数","children":[],"payload":{"lines":"144,145"}},{"content":"水平集","children":[],"payload":{"lines":"145,146"}},{"content":"分形","children":[],"payload":{"lines":"146,147"}}],"payload":{"lines":"142,147"}}],"payload":{"lines":"137,138"}},{"content":"显式几何","children":[{"content":"","children":[{"content":"定义","children":[{"content":"曲面参数化，每个点都能写出来","children":[],"payload":{"lines":"150,151"}}],"payload":{"lines":"149,151"}},{"content":"例子","children":[{"content":"点云","children":[],"payload":{"lines":"152,153"}},{"content":"Polygon Mesh","children":[{"content":"存储三角形（或四边形）的顶点","children":[],"payload":{"lines":"154,155"}},{"content":".obj 格式","children":[],"payload":{"lines":"155,156"}}],"payload":{"lines":"153,156","fold":1}}],"payload":{"lines":"151,156"}}],"payload":{"lines":"149,156"}},{"content":"曲线","children":[{"content":"贝塞尔曲线","children":[{"content":"算法：de Casteljau Algorithm","children":[],"payload":{"lines":"158,159"}},{"content":"代数表达","children":[{"content":"伯恩斯坦多项式","children":[],"payload":{"lines":"160,161"}}],"payload":{"lines":"159,161","fold":1}},{"content":"性质","children":[{"content":"仿射不变性","children":[{"content":"仿射变换（线性变换+平移）下，只需要把所有控制点都变换完再画一条贝塞尔曲线（等价于变换贝塞尔曲线上每个点）","children":[],"payload":{"lines":"163,164"}}],"payload":{"lines":"162,164"}},{"content":"形成的曲线在所有控制点的凸包内","children":[],"payload":{"lines":"164,165"}}],"payload":{"lines":"161,165","fold":1}},{"content":"Piecewise（逐段）贝塞尔曲线","children":[{"content":"最常用，四个控制点","children":[],"payload":{"lines":"166,167"}},{"content":"连续的定义","children":[],"payload":{"lines":"167,168"}}],"payload":{"lines":"165,168","fold":1}},{"content":"贝塞尔曲面","children":[{"content":"用贝塞尔曲线在水平方向和竖直方向分别应用","children":[],"payload":{"lines":"169,170"}}],"payload":{"lines":"168,170","fold":1}}],"payload":{"lines":"157,158"}},{"content":"其他spline","children":[{"content":"spline = 一个可控的曲线","children":[],"payload":{"lines":"171,172"}},{"content":"B-splines","children":[],"payload":{"lines":"172,173"}},{"content":"NURBS (B-splines的进化版)","children":[],"payload":{"lines":"173,174"}}],"payload":{"lines":"170,171"}}],"payload":{"lines":"156,157"}},{"content":"网格操作","children":[{"content":"细分","children":[{"content":"目的： 分出更多地三角形，使得原来的模型更光滑","children":[],"payload":{"lines":"176,177"}},{"content":"算法","children":[{"content":"Loop subdivision","children":[{"content":"（Loop是人名）","children":[],"payload":{"lines":"179,180"}},{"content":"先细分再调整","children":[],"payload":{"lines":"180,181"}},{"content":"只能细分三角形网格","children":[],"payload":{"lines":"181,182"}}],"payload":{"lines":"178,182","fold":1}},{"content":"Catmull-Clark Subdivision","children":[{"content":"可以细分四边形","children":[],"payload":{"lines":"183,184"}}],"payload":{"lines":"182,184","fold":1}}],"payload":{"lines":"177,184"}}],"payload":{"lines":"175,176"}},{"content":"简化","children":[{"content":"目的：减少三角形的数量，物体离得远的时候，可以用简化的模型","children":[],"payload":{"lines":"185,186"}},{"content":"算法","children":[{"content":"edge collapsing","children":[{"content":"把边变成点","children":[],"payload":{"lines":"188,189"}},{"content":"选取哪条边collapse？","children":[{"content":"标准：quadric error metrics","children":[{"content":"可以用贪心算法选边","children":[],"payload":{"lines":"191,192"}}],"payload":{"lines":"190,192"}}],"payload":{"lines":"189,192"}}],"payload":{"lines":"187,192","fold":1}}],"payload":{"lines":"186,192"}}],"payload":{"lines":"184,185"}},{"content":"正则化 Regularization","children":[{"content":"目的：让三角形更一致（大小形状差不多）","children":[],"payload":{"lines":"193,194"}}],"payload":{"lines":"192,193"}}],"payload":{"lines":"174,175"}}],"payload":{"lines":"147,148"}}],"payload":{"lines":"136,137"}},{"content":"光线追踪","children":[{"content":"Whitted-Style Ray Tracing","children":[{"content":"算法","children":[{"content":"从视线cast ray","children":[],"payload":{"lines":"197,198"}},{"content":"如果打到反射/折射物体，就recursively cast两条光线，按比例把结果加起来","children":[],"payload":{"lines":"198,199"}},{"content":"如果打到漫反射物体，就判断是否能被光源照到，如果可以就计算光栅化结果（比如用blinn-phong模型）","children":[],"payload":{"lines":"199,200"}}],"payload":{"lines":"196,200","fold":1}},{"content":"备注","children":[{"content":"不用深度测试，但是还是不能渲染出软阴影","children":[],"payload":{"lines":"201,202"}}],"payload":{"lines":"200,202","fold":1}},{"content":"基础光线追踪的技术细节","children":[{"content":"光线和物体求交","children":[{"content":"隐式表面：解方程","children":[],"payload":{"lines":"204,205"}},{"content":"显式表面","children":[{"content":"三角形网格","children":[{"content":"遍历所有三角形网格，求交","children":[],"payload":{"lines":"207,208"}},{"content":"快速的三角形和光线求交算法：Moller Trumbore Algorithm","children":[],"payload":{"lines":"208,209"}}],"payload":{"lines":"206,209"}}],"payload":{"lines":"205,209"}}],"payload":{"lines":"203,209"}},{"content":"三角形网格求交的加速：Bounding Volumes","children":[{"content":"主要想法","children":[{"content":"如果光线连包围盒都碰不到，它一定碰不到物体；所以可以把物体用包围盒简化","children":[],"payload":{"lines":"211,212"}}],"payload":{"lines":"210,212","fold":1}},{"content":"光线和Axis-Aligned Bounding Box (AABB)求交算法","children":[],"payload":{"lines":"212,213"}},{"content":"算法 （如何利用AABB加速）","children":[{"content":"Uniform Spatial Partitions","children":[{"content":"把场景分割成相同大小的格子","children":[],"payload":{"lines":"215,216"}}],"payload":{"lines":"214,216","fold":1}},{"content":"Spatial Partition","children":[{"content":"物体稀疏的地方用少的格子，密的地方用更多的格子","children":[],"payload":{"lines":"217,218"}},{"content":"具体方法","children":[{"content":"八叉树","children":[{"content":"把选中的AABB切成八块，横着切一刀，竖着切一刀","children":[],"payload":{"lines":"220,221"}}],"payload":{"lines":"219,221","fold":1}},{"content":"KD-tree","children":[{"content":"永远只沿着某个轴在某个位置切一刀 （这样就和维度无关了）","children":[],"payload":{"lines":"222,223"}},{"content":"类似二叉树","children":[],"payload":{"lines":"223,224"}}],"payload":{"lines":"221,224","fold":1}},{"content":"BSP-tree","children":[{"content":"可以斜着切","children":[],"payload":{"lines":"225,226"}}],"payload":{"lines":"224,226","fold":1}}],"payload":{"lines":"218,226"}},{"content":"问题","children":[{"content":"一个物体可能属于多个包围盒","children":[],"payload":{"lines":"227,228"}},{"content":"三角形和bounding box求交很困难，我们难以判断物体是否属于一个bounding box","children":[{"content":"但是知道一个三角形，算出它的AABB很简单（算每个坐标的最大最小值）","children":[],"payload":{"lines":"229,230"}}],"payload":{"lines":"228,230"}}],"payload":{"lines":"226,230","fold":1}}],"payload":{"lines":"216,230"}},{"content":"Object Partition &amp; Bounding Volume Hierachy（BVH）","children":[{"content":"不从空间做划分，而是从物体做划分","children":[],"payload":{"lines":"231,232"}},{"content":"常用的物体集合切割方法","children":[{"content":"Heuristic","children":[{"content":"选一个维度切割（选最长的axis）","children":[],"payload":{"lines":"234,235"}},{"content":"选处于该轴中位数的物体切割","children":[],"payload":{"lines":"235,236"}},{"content":"根据Surface Area Heuristic划分（作业）","children":[],"payload":{"lines":"236,237"}}],"payload":{"lines":"233,237"}},{"content":"停止条件：物体集合中物体数量足够小","children":[],"payload":{"lines":"237,238"}}],"payload":{"lines":"232,238","fold":1}}],"payload":{"lines":"230,238"}}],"payload":{"lines":"213,238"}}],"payload":{"lines":"209,238"}}],"payload":{"lines":"202,238"}}],"payload":{"lines":"195,196"}},{"content":"现代光线追踪的物理基础：Radiometry 辐射度量学","children":[{"content":"概念","children":[{"content":"Radient Energy and Flux (Power)","children":[{"content":"光是energy（单位：焦耳）","children":[],"payload":{"lines":"241,242"}},{"content":"Radient flux -&gt;单位时间的能量 （功率）（单位：瓦特，另一个单位：lm=lumen）","children":[],"payload":{"lines":"242,243"}}],"payload":{"lines":"240,243","fold":1}},{"content":"Solid Angle","children":[{"content":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Ω</mi><mo>=</mo><mi>A</mi><mi mathvariant=\"normal\">/</mi><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\Omega=A/r^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Ω</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>, 锥在单位球面上的面积","children":[],"payload":{"lines":"244,245"}}],"payload":{"lines":"243,245","fold":1}},{"content":"Radiant Intensity","children":[{"content":"如何描述光源","children":[],"payload":{"lines":"246,247"}},{"content":"单位立体角的power","children":[],"payload":{"lines":"247,248"}}],"payload":{"lines":"245,248","fold":1}},{"content":"Irradiance","children":[{"content":"如何描述光照到表面","children":[],"payload":{"lines":"249,250"}},{"content":"单位面积的power","children":[],"payload":{"lines":"250,251"}}],"payload":{"lines":"248,251","fold":1}},{"content":"Radiance","children":[{"content":"如何描述运动过程中的光","children":[{"content":"从某个方向打到某个表面，又从某个方向离开","children":[],"payload":{"lines":"253,254"}}],"payload":{"lines":"252,254"}},{"content":"单位面积单位立体角的的power","children":[],"payload":{"lines":"254,255"}},{"content":"=Irradiance per solid angle","children":[],"payload":{"lines":"255,256"}},{"content":"=Intensity per projected unit area","children":[],"payload":{"lines":"256,257"}},{"content":"vs irradiance","children":[{"content":"irradiance是单位表面总的power，radiance是某个方向的power，radiance对方向积分得到irradiance","children":[],"payload":{"lines":"258,259"}}],"payload":{"lines":"257,259"}}],"payload":{"lines":"251,259","fold":1}}],"payload":{"lines":"239,240"}},{"content":"BRDF （Bidirection Reflection Distribution Function）","children":[{"content":"定义：用辐射度量学描述反射","children":[{"content":"入射方向的radiance如何改变出射方向的radiance","children":[{"content":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>r</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>ω</mi><mi>r</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">d</mi><msub><mi>L</mi><mi>r</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>ω</mi><mi>r</mi></msub><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">d</mi><msub><mi>E</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">d</mi><msub><mi>L</mi><mi>r</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>ω</mi><mi>r</mi></msub><mo stretchy=\"false\">)</mo></mrow><mrow><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mi>i</mi></msub><mi mathvariant=\"normal\">d</mi><msub><mi>ω</mi><mi>i</mi></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">f_r(\\omega_i, \\omega_r) = \\frac{\\mathrm{d}L_r(\\omega_r)}{\\mathrm{d}E_i(\\omega_i)}= \\frac{\\mathrm{d}L_r(\\omega_r)}{L_i(\\omega_i)\\cos\\theta_i\\mathrm{d}\\omega_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">d</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0576em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">d</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mop mtight\"><span class=\"mtight\">c</span><span class=\"mtight\">o</span><span class=\"mtight\">s</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mathrm mtight\">d</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">d</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>","children":[],"payload":{"lines":"262,263"}}],"payload":{"lines":"261,263","fold":1}}],"payload":{"lines":"260,263"}}],"payload":{"lines":"259,260"}}],"payload":{"lines":"238,239"}},{"content":"路径追踪 Path Tracing","children":[{"content":"渲染方程和全局光照","children":[{"content":"渲染方程","children":[{"content":"出射方向的radiance是所有方向radiance影响的积分","children":[{"content":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mi>r</mi></msub><mo stretchy=\"false\">(</mo><mi>p</mi><mo separator=\"true\">,</mo><msub><mi>ω</mi><mi>r</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mo>∫</mo><msup><mi>H</mi><mn>2</mn></msup></msub><msub><mi>f</mi><mi>r</mi></msub><mo stretchy=\"false\">(</mo><mi>p</mi><mo separator=\"true\">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo>→</mo><msub><mi>ω</mi><mi>r</mi></msub><mo stretchy=\"false\">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>p</mi><mo separator=\"true\">,</mo><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mi>i</mi></msub><mi mathvariant=\"normal\">d</mi><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">L_r(p, \\omega_r) = \\int_{H^2}f_r(p,\\omega_i\\rarr \\omega_r)L_i(p, \\omega_i)\\cos\\theta_i\\mathrm{d}\\omega_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1608em;vertical-align:-0.3558em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1666em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathrm\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","children":[],"payload":{"lines":"267,268"}}],"payload":{"lines":"266,268","fold":1}}],"payload":{"lines":"265,268"}},{"content":"全局光照 vs 光栅化","children":[{"content":"全局光照：Emission + 直接光照 + 间接光照","children":[],"payload":{"lines":"269,270"}},{"content":"光栅化：Emission + 直接光照","children":[],"payload":{"lines":"270,271"}}],"payload":{"lines":"268,271"}},{"content":"计算渲染方程的工具：Monte Carlo Integration (蒙特卡洛积分)","children":[{"content":"思想：积分变采样","children":[],"payload":{"lines":"272,273"}}],"payload":{"lines":"271,273","fold":1}}],"payload":{"lines":"264,265"}},{"content":"算法","children":[{"content":"从视线cast ray","children":[{"content":"采样光源，如果光源能照到，计算直接光照的影响","children":[],"payload":{"lines":"275,276"}},{"content":"用俄罗斯轮盘赌判定终止（Russian Rolette - RR）","children":[],"payload":{"lines":"276,277"}},{"content":"如果没终止，往随机采样的方向recursively cast ray，计算间接光照","children":[],"payload":{"lines":"277,278"}}],"payload":{"lines":"274,278"}}],"payload":{"lines":"273,274","fold":1}}],"payload":{"lines":"263,264"}},{"content":"（拓展）高级光线追踪","children":[{"content":"分类","children":[{"content":"unbiased Monte Carlo techniques","children":[{"content":"期望是真实值（不管用了多少sample）","children":[],"payload":{"lines":"282,283"}}],"payload":{"lines":"281,283","fold":1}},{"content":"biased","children":[{"content":"期望不是真实值，但随着样本量的增加，会converge到真实值","children":[{"content":"consistent","children":[],"payload":{"lines":"285,286"}}],"payload":{"lines":"284,286"}}],"payload":{"lines":"283,286","fold":1}}],"payload":{"lines":"280,286"}},{"content":"Unbiased","children":[{"content":"Bidirectional Path Tracing (BDPT)","children":[],"payload":{"lines":"287,288"}},{"content":"Metropolis Light Transport (MLT)","children":[],"payload":{"lines":"288,289"}}],"payload":{"lines":"286,287"}},{"content":"Biased","children":[{"content":"Photon Mapping","children":[],"payload":{"lines":"290,291"}},{"content":"Vertex Connection and Merging","children":[],"payload":{"lines":"291,292"}},{"content":"Instant Radiosity","children":[],"payload":{"lines":"292,293"}}],"payload":{"lines":"289,290"}}],"payload":{"lines":"278,279"}},{"content":"材质和外观","children":[{"content":"材质=BRDF","children":[],"payload":{"lines":"295,296"}},{"content":"各种材质","children":[{"content":"漫反射材质","children":[{"content":"最简单的漫反射材质：均匀地向出射方向反射","children":[],"payload":{"lines":"298,299"}}],"payload":{"lines":"297,299"}},{"content":"理想折射反射材质 (Ideal reflective / refractive material )","children":[{"content":"BTDF(transmit 折射) + BRDF(reflect 反射) = BSDF（scatter 散射）","children":[],"payload":{"lines":"300,301"}},{"content":"镜面反射","children":[],"payload":{"lines":"301,302"}},{"content":"折射","children":[{"content":"折射方向的计算：Snell's law","children":[],"payload":{"lines":"303,304"}}],"payload":{"lines":"302,304"}},{"content":"光线反射的比例：菲涅尔项（Fresnel term）","children":[{"content":"导体的反射比例很高","children":[],"payload":{"lines":"305,306"}},{"content":"和光线打到物体的方向有关，光线和法线越平行，反射比例越小","children":[],"payload":{"lines":"306,307"}}],"payload":{"lines":"304,307","fold":1}}],"payload":{"lines":"299,307"}},{"content":"微表面材质 (Microfacet material)","children":[{"content":"思想","children":[{"content":"微观看物体表面，是无数镜面反射的微表面","children":[],"payload":{"lines":"309,310"}}],"payload":{"lines":"308,310","fold":1}},{"content":"微表面材质的BRDF（作业）","children":[],"payload":{"lines":"310,311"}}],"payload":{"lines":"307,311"}},{"content":"各向异性材质（Anisotropic Materials）","children":[],"payload":{"lines":"311,312"}}],"payload":{"lines":"296,297"}},{"content":"BRDF的性质","children":[{"content":"非负性","children":[],"payload":{"lines":"313,314"}},{"content":"线性：可以拆成很多项，分别套进渲染方程，再把结果加起来","children":[],"payload":{"lines":"314,315"}},{"content":"可逆性：交换入射方向和出射方向，得到的BRDF一定一致","children":[],"payload":{"lines":"315,316"}},{"content":"能量守恒：经过brdf计算，不能让能量变多，只会变少","children":[],"payload":{"lines":"316,317"}},{"content":"各向同性的brdf取决于相对方位角","children":[],"payload":{"lines":"317,318"}}],"payload":{"lines":"312,313","fold":1}},{"content":"（拓展）高级材质","children":[{"content":"Participating Media（散射介质）","children":[],"payload":{"lines":"319,320"}},{"content":"Hair Appearance","children":[{"content":"Kajiya-Kay Model","children":[],"payload":{"lines":"321,322"}},{"content":"Marschner Model","children":[],"payload":{"lines":"322,323"}},{"content":"Double Cylinder Model","children":[],"payload":{"lines":"323,324"}}],"payload":{"lines":"320,324"}},{"content":"布料模拟","children":[],"payload":{"lines":"324,325"}},{"content":"Detailed material","children":[],"payload":{"lines":"325,326"}},{"content":"Procedural Appearnace","children":[],"payload":{"lines":"326,327"}}],"payload":{"lines":"318,319"}}],"payload":{"lines":"293,294"}}],"payload":{"lines":"194,195"}},{"content":"动画和模拟","children":[{"content":"介绍","children":[{"content":"Keyfram animation","children":[],"payload":{"lines":"329,330"}},{"content":"Physical simulation","children":[{"content":"弹簧","children":[{"content":"Hooke's Law","children":[],"payload":{"lines":"332,333"}}],"payload":{"lines":"331,333"}},{"content":"应用弹簧做布料模拟","children":[{"content":"别的方法：FEM（Finite element method）","children":[],"payload":{"lines":"334,335"}}],"payload":{"lines":"333,335"}},{"content":"Particle system","children":[{"content":"模拟粒子中力的作用","children":[],"payload":{"lines":"336,337"}},{"content":"吸引力，排斥力","children":[{"content":"电磁力","children":[],"payload":{"lines":"338,339"}},{"content":"弹簧","children":[],"payload":{"lines":"339,340"}}],"payload":{"lines":"337,340"}},{"content":"Damping forces","children":[{"content":"摩擦力","children":[],"payload":{"lines":"341,342"}}],"payload":{"lines":"340,342"}},{"content":"碰撞","children":[{"content":"墙，容器","children":[],"payload":{"lines":"343,344"}}],"payload":{"lines":"342,344"}}],"payload":{"lines":"335,344","fold":1}}],"payload":{"lines":"330,331"}},{"content":"Kinematics（运动学）","children":[{"content":"用于定义骨骼运动","children":[],"payload":{"lines":"345,346"}},{"content":"正运动学：定义关节运动位置","children":[],"payload":{"lines":"346,347"}},{"content":"逆运动学：定义端点最终位置，自动生关节变化","children":[],"payload":{"lines":"347,348"}}],"payload":{"lines":"344,345"}},{"content":"Rigging（绑定）","children":[{"content":"Blend shapes：定义两个关键帧，插值","children":[],"payload":{"lines":"349,350"}}],"payload":{"lines":"348,349","fold":1}},{"content":"动捕","children":[],"payload":{"lines":"350,351"}}],"payload":{"lines":"328,329"}},{"content":"方法","children":[{"content":"Single particle simulation","children":[{"content":"描述速度场，写出ordinary differential equation (ODE)","children":[],"payload":{"lines":"353,354"}},{"content":"ODE的解法","children":[{"content":"Euler's method （forward Euler， explicit euler）","children":[],"payload":{"lines":"355,356"}},{"content":"Runge-Kutta Families","children":[{"content":"很多种接ODE的方法","children":[],"payload":{"lines":"357,358"}},{"content":"RK4，4阶的方法","children":[],"payload":{"lines":"358,359"}}],"payload":{"lines":"356,359","fold":1}}],"payload":{"lines":"354,359"}}],"payload":{"lines":"352,353"}},{"content":"Fluid simulation","children":[{"content":"质点法：模拟所有单个物体","children":[],"payload":{"lines":"360,361"}},{"content":"网格法：把物体分成很多组，以组为单位模拟","children":[],"payload":{"lines":"361,363"}}],"payload":{"lines":"359,360"}}],"payload":{"lines":"351,352"}}],"payload":{"lines":"327,328"}},{"content":"其他话题","children":[{"content":"相机和透镜","children":[{"content":"相机的概念","children":[{"content":"FOV （field of view）","children":[{"content":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">F</mi><mi mathvariant=\"normal\">O</mi><mi mathvariant=\"normal\">V</mi></mrow><mo>=</mo><mn>2</mn><mi>arctan</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mfrac><mrow><mi>h</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><mi>f</mi></mfrac><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{FOV} = 2\\arctan(\\frac{h/2}{f})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">FOV</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.4911em;vertical-align:-0.4811em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">arctan</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\">/2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span></span> h是sensor大小，f是焦距","children":[],"payload":{"lines":"367,368"}}],"payload":{"lines":"366,368","fold":1}},{"content":"亮度 = 曝光时间 x 到sensor的irradiance","children":[{"content":"曝光时间","children":[{"content":"影响因素：快门控制","children":[{"content":"shutter speed：快门开放速度，速度越快，更少光进来，越不会运动模糊","children":[],"payload":{"lines":"371,372"}}],"payload":{"lines":"370,372","fold":1}}],"payload":{"lines":"369,372"}},{"content":"到sensor的irradiance","children":[{"content":"影响因素","children":[{"content":"F-Number（F-Stop）","children":[{"content":"由光圈大小和焦距决定，写为F<strong>N</strong>，N = 焦距/光圈直径","children":[],"payload":{"lines":"375,376"}},{"content":"光圈越大，景深效果越明显（非对焦位置物体越模糊）","children":[],"payload":{"lines":"376,377"}}],"payload":{"lines":"374,377","fold":1}},{"content":"ISO：感光度","children":[{"content":"感光度越高，越亮，噪声越大","children":[],"payload":{"lines":"378,379"}}],"payload":{"lines":"377,379","fold":1}}],"payload":{"lines":"373,379"}}],"payload":{"lines":"372,379"}}],"payload":{"lines":"368,379"}}],"payload":{"lines":"365,366"}},{"content":"透镜","children":[{"content":"Thin Lens Approximation","children":[{"content":"可以用来近似相机成像原理","children":[],"payload":{"lines":"381,382"}}],"payload":{"lines":"380,382"}},{"content":"Defocus Blur","children":[{"content":"不在focal plane 的物体被接收到会变成一个⚪（circle of confusion），就呈现出模糊效果","children":[],"payload":{"lines":"383,384"}},{"content":"取决于光圈的大小（A）","children":[],"payload":{"lines":"384,385"}},{"content":"Depth of field","children":[{"content":"当物体的focal plane距离ideal focal plane（焦距所在的平面）一定距离内的时候，CoC都是足够小的（接近一个pixel的大小，可以认为是锐利的），这段距离就是depth of focus","children":[],"payload":{"lines":"386,388"}}],"payload":{"lines":"385,388"}}],"payload":{"lines":"382,388","fold":1}}],"payload":{"lines":"379,380"}}],"payload":{"lines":"364,365"}},{"content":"光场","children":[{"content":"全光函数","children":[{"content":"整个世界（能看到的东西）是一个七个维度的函数","children":[],"payload":{"lines":"390,391"}}],"payload":{"lines":"389,391","fold":1}},{"content":"光场图","children":[{"content":"用全光函数表示图片","children":[],"payload":{"lines":"392,393"}}],"payload":{"lines":"391,393","fold":1}},{"content":"光场相机","children":[{"content":"光场照出的结果包含了环境中所有光线的信息","children":[],"payload":{"lines":"394,395"}},{"content":"可以得到任意景深的照片","children":[],"payload":{"lines":"395,396"}}],"payload":{"lines":"393,396","fold":1}}],"payload":{"lines":"388,389"}},{"content":"颜色","children":[{"content":"颜色是人的感知","children":[],"payload":{"lines":"397,398"}},{"content":"人眼感知颜色的锥形细胞有三类","children":[{"content":"S-Cone （短波长）","children":[],"payload":{"lines":"399,400"}},{"content":"M-Cone （中波长）","children":[],"payload":{"lines":"400,401"}},{"content":"L-Cone （长波长）","children":[],"payload":{"lines":"401,402"}},{"content":"每个人感光细胞的数量分布差异很大","children":[],"payload":{"lines":"402,403"}}],"payload":{"lines":"398,403"}},{"content":"Tristimulus theory of color（三刺激 SML）","children":[],"payload":{"lines":"403,404"}},{"content":"Matamerism （同色异谱）","children":[{"content":"光的光谱不一样，但是看起来一样（SML一样）","children":[],"payload":{"lines":"405,406"}}],"payload":{"lines":"404,406","fold":1}},{"content":"色彩空间","children":[{"content":"标准RGB系统（sRGB）","children":[],"payload":{"lines":"407,408"}},{"content":"CIE XYZ","children":[],"payload":{"lines":"408,409"}},{"content":"CIE LAB","children":[],"payload":{"lines":"409,410"}},{"content":"CMYK","children":[{"content":"减色系统","children":[],"payload":{"lines":"411,412"}},{"content":"用于打印","children":[],"payload":{"lines":"412,413"}}],"payload":{"lines":"410,413","fold":1}}],"payload":{"lines":"406,413"}}],"payload":{"lines":"396,397"}}],"payload":{"lines":"363,364"}}],"payload":{"lines":"1,2"}},{"colorFreezeLevel":2})</script>
</body>
</html>
